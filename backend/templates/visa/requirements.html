{% extends "base.html" %}
{% load static %}

{% block title %}Y√™u c·∫ßu h·ªì s∆° visa{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{% static 'visa/visa_requirements.css' %}">
{% endblock %}

{% block content %}
<div class="container py-5">
    <h2 class="mb-4 text-primary fw-bold">Tra c·ª©u y√™u c·∫ßu h·ªì s∆°</h2>

    <form method="GET" action="{% url 'visa:ho-so-yeu-cau' %}" class="row g-3">

        <!-- COUNTRY -->
        <div class="col-md-6">
            <label class="form-label">
                Ch·ªçn qu·ªëc gia <span class="required-star">*</span>
            </label>
            <select name="country" class="form-select" onchange="this.form.submit()">
                <option value="">-- Ch·ªçn qu·ªëc gia --</option>
                {% for c in countries %}
                    <option value="{{ c.id }}" {% if selected_country|stringformat:'s' == c.id|stringformat:'s' %}selected{% endif %}>
                        {{ c.name }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <!-- VISA TYPE -->
        <div class="col-md-6">
            <label class="form-label">
                Lo·∫°i visa <span class="required-star">*</span>
            </label>
            <select name="visa_type" class="form-select" {% if not visa_types %}disabled{% endif %} onchange="this.form.submit()">
                <option value="">-- Ch·ªçn lo·∫°i visa --</option>
                {% if visa_types %}
                    {% for v in visa_types %}
                        <option value="{{ v.id }}" {% if selected_visa_type|stringformat:'s' == v.id|stringformat:'s' %}selected{% endif %}>
                            {{ v.name }} ({{ v.get_purpose_display }})
                        </option>
                    {% endfor %}
                {% endif %}
            </select>
        </div>
    </form>

    <hr class="my-4">

    <!-- RESULT -->
    {% if documents %}
        <a href="#documents-list" class="btn btn-primary btn-doc mb-3">
            üìÑ Danh s√°ch h·ªì s∆° c·∫ßn c√≥:
        </a>
        <ul class="list-group">
            {% for doc in documents %}
                <li class="list-group-item">
                    <strong class="text-muted">{{ doc.name }}</strong><br>
                    <small>{{ doc.description }}</small>
                </li>
            {% endfor %}
        </ul>
    {% elif selected_country and selected_visa_type %}
        <div class="alert alert-warning mt-3">
            Vui l√≤ng ch·ªçn Lo·∫°i Visa.
        </div>
    {% endif %}
</div>
{% endblock %}
